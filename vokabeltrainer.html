<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    <link rel="manifest" href="manifest.webmanifest">
    <meta name="theme-color" content="#1e88e5">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vokabeltrainer</title>

    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/worttrainer.css">
    <link rel="stylesheet" href="css/vokabeltrainer.css">

    <!-- COMMON -->
    <script type="module" src="js/common/storage.js" defer></script>
    <script type="module" src="js/common/settings.js" defer></script>
    <script type="module" src="js/common/import.js" defer></script>
    <script type="module" src="js/common/indexedBackup.js" defer></script>
    <script type="module" src="js/common/menu.js" defer></script>

    <!-- VOKABELTRAINER -->
    <script type="module" src="js/models/Vokabel.js" defer></script>
    <script type="module" src="js/vokabeltrainer/vokabeltrainer-storage.js" defer></script>
    <script type="module" src="js/vokabeltrainer/vokabeltrainer-logic.js" defer></script>
    <script type="module" src="js/vokabeltrainer/vokabeltrainer-ui.js" defer></script>
    <script type="module" src="js/vokabeltrainer/vokabeltrainer.js" defer></script>
  </head>

  <body>
    <div class="layout">
      <div id="main-menu"></div>

      <div class="content">
        <h1>Vokabeltrainer</h1>

        <div class="trainer-layout">

          <!-- Linke Spalte: Gruppierte Vokabelliste -->
          <div class="trainer-wordlist">
            <h4>Vokabelliste</h4>
            <div id="vocab-total-count" class="vocab-total-count"></div>
            <div id="vocab-list-display"></div>
          </div>

          <!-- Rechte Spalte: Panels -->
          <div class="trainer-main">

            <!-- Toggle: Neue Vokabel hinzufügen -->
            <div class="vocab-actions">
              <button type="button" id="vocab-toggle-btn">
                ▲ Neue Vokabel hinzufügen ▲
              </button>
            </div>

            <!-- Eingabepanel -->
            <div id="vocab-input-panel" class="vocab-input-container panel-box">

              <h2>Neue Vokabel hinzufügen</h2>

              <div class="vocab-row">
                <div class="vocab-field">
                  <label for="vocab-en">Englisch</label>
                  <input type="text" id="vocab-en" placeholder="Englisches Wort eingeben">
                </div>

                <div class="vocab-field">
                  <label for="vocab-de">Deutsch</label>
                  <input type="text" id="vocab-de" placeholder="Deutsches Wort eingeben">
                </div>
              </div>

              <div class="vocab-list-row">
                <div class="vocab-list-select">
                  <label for="vocab-list">Liste</label>
                  <select id="vocab-list">
                    <option value="default">Allgemeine Liste</option>
                  </select>
                </div>

                <div class="vocab-list-new">
                  <label for="vocab-new-list-name">Neue Liste</label>
                  <input type="text" id="vocab-new-list-name" placeholder="Name der neuen Liste">
                </div>
              </div>

              <div class="vocab-actions">
                <button type="button" id="vocab-save-btn">Vokabel speichern</button>
                <button type="button" id="vocab-new-list-btn">Neue Liste anlegen</button>
              </div>

              <div class="vocab-actions-secondary">
                <button type="button" id="vocab-cancel-btn" class="vocab-secondary-btn" style="display:none;">
                  Abbrechen
                </button>

                <button type="button" id="vocab-close-panel-btn" class="vocab-secondary-btn vocab-close-right">
                  Bereich schließen
                </button>
              </div>

              <div id="vocab-status" class="vocab-status" style="display:none;"></div>
            </div>

            <!-- Toggle: Training einstellen -->
            <div class="vocab-actions">
              <button type="button" id="training-toggle-btn">
                ▼ Training einstellen ▼
              </button>
            </div>

            <!-- Trainings-Einstellungsbereich -->
            <div id="training-settings-panel" class="training-settings-container panel-box" style="display:none;">

              <h2>Training einstellen</h2>

              <!-- A) Sprachrichtung -->
              <div class="training-section">
                <h3>Sprachrichtung</h3>
                <label><input type="radio" name="training-direction" value="de-en" checked> Deutsch → Englisch</label>
                <label><input type="radio" name="training-direction" value="en-de"> Englisch → Deutsch</label>
                <label><input type="radio" name="training-direction" value="mixed"> Gemischt</label>
              </div>

              <!-- B) Listen auswählen -->
              <!-- Listen auswählen (Dropdown) -->
              <div class="list-dropdown">

                <button type="button" id="list-dropdown-toggle" class="list-dropdown-toggle">
                  ▼ Listen auswählen ▼
                </button>

                <div id="list-dropdown-panel" class="list-dropdown-panel">
                  <div id="training-list-selection"></div>
                </div>

              </div>

              <!-- Buttons bleiben außerhalb -->
              <div class="training-list-actions">
                <button type="button" id="training-select-all-btn">Alle auswählen</button>
                <button type="button" id="training-select-none-btn">Keine auswählen</button>
              </div>

<!-- C) Trainingsmodus -->
<div class="training-section">
  <h3>Trainingsmodus</h3>

  <!-- Radiobuttons oben -->
  <div class="training-mode-options">
    <label><input type="radio" name="training-mode" value="count" checked> Nach Anzahl Vokabeln</label>
    <label><input type="radio" name="training-mode" value="time"> Zeitbasiert</label>
    <label><input type="radio" name="training-mode" value="all"> Alle Vokabeln</label>
  </div>

  <!-- Eingabefelder darunter, stabil -->
  <div class="training-mode-fields">

    <div id="training-mode-count" class="training-mode-field active">
      <label for="training-count-input">Anzahl Vokabeln</label>
      <input type="number" id="training-count-input" min="1" max="500" value="20">
    </div>

    <div id="training-mode-time" class="training-mode-field">
      <label for="training-time-input">Dauer in Minuten</label>
      <input type="number" id="training-time-input" min="1" max="60" value="10">
    </div>

    <div id="training-mode-all" class="training-mode-field">
      <!-- kein Eingabefeld nötig -->
      <p>Alle Vokabeln aus den ausgewählten Listen werden trainiert.</p>
    </div>

  </div>
</div>

              <!-- D) Optionen -->
              <div class="training-section">
                <h3>Optionen</h3>

                <label><input type="checkbox" id="training-only-hard"> Nur schwierige Vokabeln</label>
                <label><input type="checkbox" id="training-with-repeats" checked> Wiederholungen aktivieren</label>

                <p class="training-info">Die Reihenfolge der Vokabeln ist immer zufällig.</p>
              </div>

              <!-- Vorschau + Start -->
              <div class="training-section training-footer">
                <div id="training-preview" class="training-preview">
                  Es werden 0 Vokabeln trainiert.
                </div>

                <button type="button" id="training-start-btn" class="training-start-btn">
                  Training starten
                </button>
              </div>
            </div>

            <!-- TRAININGSMODUS -->
            <div id="training-mode" class="training-mode-container panel-box" style="display:none;">

              <h2>Training</h2>

              <div id="training-progress" class="training-progress">
                <span id="training-progress-text">0 / 0</span>
              </div>

              <div id="training-word" class="training-word"></div>

              <div class="training-input-area">
                <label for="training-answer">Übersetzung eingeben</label>
                <input type="text" id="training-answer" autocomplete="off">
              </div>

              <div class="training-buttons">
                <button type="button" id="training-check-btn">Prüfen</button>
                <button type="button" id="training-skip-btn">Überspringen</button>
                <button type="button" id="training-stop-btn" class="training-stop-btn">Training abbrechen</button>
              </div>

              <div id="training-feedback" class="training-feedback"></div>
            </div>

          </div> <!-- Ende trainer-main -->
        </div>
      </div>
    </div>

    <script type="module">
      import { loadMenu } from "./js/common/menu.js";
      loadMenu();
    </script>

    <div id="updateToast" class="update-toast">App wurde aktualisiert</div>
  </body>
</html>
